---
- name: Retrieve all users in /etc/passwd and display the result
  hosts: all
  gather_facts: false
  become: true

  tasks:
    - name: Get all usernames from /etc/passwd
      shell: awk -F: '{print $1}' /etc/passwd
      register: passwd_users
      changed_when: false

    - name: Output all users from /etc/passwd
      debug:
        msg: "{{ passwd_users.stdout_lines }}"
